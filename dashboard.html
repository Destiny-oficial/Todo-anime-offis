<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Usuario</title>
   <div id="chat-toggle">
    <img src="https://postimage.me/images/2025/02/06/IMG-20250123-WA0127.jpg" alt="Chat" id="chat-icon">
</div>

<div id="chat-container">
    <div id="chat-header">Chat de Soporte con Kitten gift ❄️</div>
    <div id="chat-messages"></div>
    <input type="text" id="chat-input" placeholder="Escribe tu pregunta..." />
    <button id="send-btn">Enviar</button>
</div>
<!-- Botón Personalizado -->



<style>
    
    .ko-fi-button {
    display: inline-block;
    padding: 10px 20px;
    background-color: #ff5f5f;
    color: white;
    font-size: 16px;
    text-decoration: none;
    border-radius: 5px;
    font-weight: bold;
    transition: 0.3s;
}
.ko-fi-button:hover {
    background-color: #e04848;
}
    
    /* Contenedor del chat */
    #chat-container {
        position: fixed;
        bottom: 10px;
        right: 20px;
        width: 200px;
        height: 250px;
        background: white;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0,0,0,0.2);
        display: none; /* Oculto al inicio */
        flex-direction: column;
        overflow: hidden;
    }

    /* Encabezado del chat */
    #chat-header {
        background: #333;
        color: white;
        padding: 10px;
        text-align: center;
        font-weight: bold;
    }

    /* Área de mensajes */
    #chat-messages {
        flex: 1;
        padding: 10px;
        overflow-y: auto;
        font-size: 14px;
    }

    /* Entrada de texto */
    #chat-input {
        border: none;
        padding: 10px;
        width: calc(100% - 60px);
        border-top: 1px solid #ccc;
    }

    /* Botón de enviar */
    #send-btn {
        width: 50px;
        border: none;
        background: #007bff;
        color: white;
        cursor: pointer;
    }

    /* Botón flotante para mostrar/ocultar el chat */
    #chat-toggle {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 40px;
        height: 40px;
        background: white;
        border-radius: 50%;
        box-shadow: 0 0 5px rgba(0,0,0,0.3);
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
    }

    /* Imagen dentro del botón */
    #chat-icon {
        width: 30px;
        height: 30px;
        border-radius: 50%;
    }
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #333;
            color: white;
            padding: 10px 20px;
        }
        header img {
            height: 40px;
        }
        .menu {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
        }
        .menu li {
            margin: 0 10px;
        }
        .menu li a {
            color: white;
            text-decoration: none;
        }
        .search-bar {
            margin: 20px;
            text-align: center;
        }
        .search-bar input {
            padding: 10px;
            width: 70%;
            max-width: 400px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .search-results, .animes {
            text-align: center;
            margin: 20px 0;
        }
        .search-results ul, .animes ul {
            list-style: none;
            padding: 0;
        }
        .search-results li, .animes li {
            margin: 5px;
            font-size: 18px;
            cursor: pointer;
            color: blue;
        }
        .search-results li:hover, .animes li:hover {
            text-decoration: underline;
        }
        .search-results {
            display: none;
        }
        .intro, .user-info, .collaborators, .contact {
            text-align: center;
            margin: 20px 0;
        }
        .intro img {
            width: 100%;
            max-height: 400px;
            object-fit: cover;
        }
        footer {
            background-color: #333;
            color: white;
            padding: 10px;
            text-align: center;
            font-size: 12px;
        }
        .contact a {
            color: white;
            text-decoration: none;
        }
        
        .survey {
    text-align: center;
    margin: 20px 0;
    padding: 20px;
    background-color: #f4f4f4;
    border-radius: 8px;
}

.survey h2 {
    margin-bottom: 10px;
}

.survey label {
    display: block;
    margin: 5px 0;
    font-size: 18px;
}

.survey button {
    margin-top: 10px;
    padding: 10px 15px;
    font-size: 16px;
    background-color: #333;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

.survey button:hover {
    background-color: #555;
}

.subscription {
    text-align: center;
    margin: 20px;
    padding: 20px;
    background-color: #f4f4f4;
    border-radius: 8px;
}

.subscription h2 {
    margin-bottom: 10px;
}

.subscription select {
    padding: 10px;
    font-size: 16px;
    margin-bottom: 10px;
}

.subscription button {
    padding: 10px 15px;
    font-size: 16px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

.subscription button:hover {
    background-color: #0056b3;
}
    </style>
</head>
<body>

    <header>
        <img src="https://qu.ax/JrOvP.jpg" alt="Logo">
        <ul class="menu">
            <li><a href="juegos.html" id="juegos-link">minijuegos</a></li>
             <li><a href="perfil.html" id="profile-link">Perfil</a></li>
            <li><a href="logout.html" id="logout-link">Cerrar Sesión</a></li>
        </ul>
    </header>

    <section class="search-bar">
        <input type="text" id="search-input" placeholder="Buscar animes...">
    </section>

    <section class="search-results">
        <h2>Resultados de búsqueda</h2>
        <ul id="search-results-list"></ul>
    </section>

    <section class="intro">
        <h2>Bienvenido al Dashboard</h2>
        <img src="https://postimage.me/images/2025/01/29/1738107853687.jpg" alt="Portada de Anime">
        <p>Este es tu panel personal donde puedes ver tus animes recomendados y más.</p>
    </section>

    <section class="user-info">
        <h3>Información del Usuario</h3>
        <p><strong>Nombre:</strong> <span id="user-name">Cargando...</span></p>
        <p><strong>Email:</strong> <span id="user-email">Cargando...</span></p>
        <p><strong>Fecha de Registro:</strong> <span id="user-registration-date">Cargando...</span></p>
    </section>
    
    <section class="subscription">
    <h2>Suscripción Anime Pass</h2>
    <p>Disfruta de tus animes favoritos sin anuncios y en alta calidad.</p>
    
    <label for="plan-select">Elige tu plan:</label>
    <select id="plan-select">
        <option value="28">Anime Pass - 28 MXN/mes</option>
        <option value="50">Anime Pass Plus - 50 MXN/mes</option>
        <option value="80">Anime Pass Premium - 80 MXN/mes</option>
    </select>

    <button id="subscribe-btn">Suscribirse</button>

    <p id="subscription-status" style="display: none; color: green;"></p>
</section>
<a href="https://ko-fi.com/kittengift56_botparati" target="_blank" class="ko-fi-button">
    Suscribirse a Anime Pass en Ko-fi
</a>
    <section class="animes">
        <h2>Animes Recomendados</h2>
        <ul id="anime-list">
            <li data-url="https://www.crunchyroll.com/series/G1XHJVXX2?utm_medium=android&utm_source=share">Takt Op Destiny</li>
            <li data-url="https://www.crunchyroll.com/es/series/GYVNXJM8Y/attack-on-titan">Attack on Titan</li>
            <li data-url="https://www.crunchyroll.com/es/series/G63H2EDKX/jujutsu-kaisen">Jujutsu Kaisen</li>
            <li data-url="https://www.crunchyroll.com/es/series/GY5P48XEY/demon-slayer-kimetsu-no-yaiba">Demon Slayer</li>
            <li data-url="https://www.crunchyroll.com/es/series/G6NQ5DWZ6/my-hero-academia">My Hero Academia</li>
            <li href="kitten.html">Kitten</li>
        </ul>
    </section>

    <section class="collaborators">
        <h2>Colaboradores y Trabajadores</h2>
        <p>Conoce a las personas que hacen posible esta página.</p>
    </section>

    <section class="contact">
        <h2>Redes Sociales y Contacto</h2>
        <a href="https://x.com/SergioY25444970?t=J9MX_P-rMqoDUs7Q0lM_mw&s=09">Twitter</a>
        <a href="https://www.facebook.com/profile.php?id=100045586566501">Facebook</a>
        <a href="https://www.instagram.com/sergio_yt46?igsh=MWdsaHN3cDRwaXZhag==">Instagram</a>
    </section>

<section class="survey">
    <h2>¿Qué anime te gusta más?</h2>
    <form id="survey-form">
        <label>
            <input type="radio" name="anime" value="Attack on Titan"> Attack on Titan
        </label><br>
        <label>
            <input type="radio" name="anime" value="Jujutsu Kaisen"> Jujutsu Kaisen
        </label><br>
        <label>
            <input type="radio" name="anime" value="Demon Slayer"> Demon Slayer
        </label><br>
        <label>
            <input type="radio" name="anime" value="My Hero Academia"> My Hero Academia
        </label><br>
        <label>
            <input type="radio" name="anime" value="Takt Op Destiny"> Takt Op Destiny
        </label><br>
        <button type="submit">Votar</button>
    </form>

    <div id="survey-results" style="display:none;">
        <h3>Resultados:</h3>
        <ul>
            <li>Attack on Titan: <span id="result-aot">0</span> votos</li>
            <li>Jujutsu Kaisen: <span id="result-jk">0</span> votos</li>
            <li>Demon Slayer: <span id="result-ds">0</span> votos</li>
            <li>My Hero Academia: <span id="result-mha">0</span> votos</li>
<li>Takt Op Destiny: <span id="result-aot">0</span> votos</li>            
        </ul>
    </div>
</section>

            <li><a href="libro.html" id="logout-link">ver libros en proceso</a></li>
            <p>los mejores libros de anime y fantasía de hakimito Martinez Javier©</p>
            
            <p>lo podras ver con el boton de arriba que dice ver libros en proceso</p>
        </ul>

    <footer>
        <p>&copy; 2025 Página de Anime. Todos los derechos reservados.</p>
    </footer>

    <script>
        // Recuperar datos del usuario almacenados en localStorage
        const userName = localStorage.getItem('username');
        const userEmail = localStorage.getItem('email');
        const registrationDate = localStorage.getItem('registrationDate');

        // Mostrar datos del usuario
        if (userName && userEmail && registrationDate) {
            document.getElementById('user-name').textContent = userName;
            document.getElementById('user-email').textContent = userEmail;
            document.getElementById('user-registration-date').textContent = registrationDate;
        } else {
            document.getElementById('user-name').textContent = "regístrese para ver esta información 😮‍💨";
            document.getElementById('user-email').textContent = "regístrese para ver esta información 😮‍💨";
            document.getElementById('user-registration-date').textContent = "regístrese para ver esta información 😮‍💨";
        }
        const animes = [
            { name: "Takt Op Destiny", url: "https://www.crunchyroll.com/series/G1XHJVXX2?utm_medium=android&utm_source=share" },
            { name: "Attack on Titan", url: "https://www.crunchyroll.com/es/series/GYVNXJM8Y/attack-on-titan" },
            { name: "Jujutsu Kaisen", url: "https://www.crunchyroll.com/es/series/G63H2EDKX/jujutsu-kaisen" },
            { name: "Demon Slayer", url: "https://www.crunchyroll.com/es/series/GY5P48XEY/demon-slayer-kimetsu-no-yaiba" },
            { name: "My Hero Academia", url: "https://www.crunchyroll.com/es/series/G6NQ5DWZ6/my-hero-academia" },
            {name: "kitten", url: "kitten.html"},
            {name: "libros", url: "libro.html"},
            {name:"juegos", url: "juegos.html"}
            
        ];

        const searchInput = document.getElementById('search-input');
        const searchResults = document.querySelector('.search-results');
        const searchResultsList = document.getElementById('search-results-list');
        const animeList = document.querySelector('.animes');

        function searchAnime() {
            const searchQuery = searchInput.value.toLowerCase();
            searchResultsList.innerHTML = '';

            if (searchQuery === '') {
                searchResults.style.display = 'none';
                animeList.style.display = 'block';
                return;
            }

            animeList.style.display = 'none';
            searchResults.style.display = 'block';

            const filteredAnimes = animes.filter(anime => anime.name.toLowerCase().includes(searchQuery));

            if (filteredAnimes.length > 0) {
                filteredAnimes.forEach(anime => {
                    const li = document.createElement('li');
                    li.textContent = anime.name;
                    li.dataset.url = anime.url;
                    li.addEventListener('click', () => window.location.href = anime.url);
                    searchResultsList.appendChild(li);
                });
            } else {
                const li = document.createElement('li');
                li.textContent = `Buscar "${searchQuery}" en Google`;
                li.style.color = 'red';
                li.addEventListener('click', () => {
                    window.location.href = `https://www.google.com/search?q=${encodeURIComponent(searchQuery)} anime`;
                });
                searchResultsList.appendChild(li);
            }
        }

        searchInput.addEventListener('input', searchAnime);

        document.querySelectorAll("#anime-list li").forEach(li => {
            li.addEventListener("click", function() {
                window.location.href = this.dataset.url;
            });
        });
    document.addEventListener("DOMContentLoaded", function () {
        const surveyForm = document.getElementById("survey-form");
        const resultsDiv = document.getElementById("survey-results");

        const votes = JSON.parse(localStorage.getItem("surveyVotes")) || {
            "Attack on Titan": 0,
            "Jujutsu Kaisen": 0,
            "Demon Slayer": 0,
            "My Hero Academia": 0,
            "Takt Op Destiny": 0
        };

        function updateResults() {
            document.getElementById("result-aot").textContent = votes["Attack on Titan"];
            document.getElementById("result-jk").textContent = votes["Jujutsu Kaisen"];
           
document.getElementById("result-aot").textContent = votes["Takt Op Destiny"];           
            document.getElementById("result-ds").textContent = votes["Demon Slayer"];
            document.getElementById("result-mha").textContent = votes["My Hero Academia"];
            resultsDiv.style.display = "block";
        }

        surveyForm.addEventListener("submit", function (event) {
            event.preventDefault();
            const selectedOption = document.querySelector("input[name='anime']:checked");
            if (selectedOption) {
                votes[selectedOption.value]++;
                localStorage.setItem("surveyVotes", JSON.stringify(votes));
                updateResults();
                alert("¡Gracias por tu voto!");
            } else {
                alert("Por favor, selecciona una opción.");
            }
        });

        updateResults();
    });
        
       let respuestas = {};

// Cargar las respuestas desde chatbot.json
fetch("chatbot.json")
    .then(response => response.json())
    .then(data => respuestas = data)
    .catch(error => console.error("Error cargando el chatbot:", error));

// Recuperar la foto de perfil desde localStorage
var fotoPerfil = localStorage.getItem('profilePhoto') || 'https://via.placeholder.com/120'; // Foto por defecto si no se encuentra

document.getElementById("send-btn").addEventListener("click", function() {
    procesarPregunta();
});

// Permitir enviar con Enter
document.getElementById("chat-input").addEventListener("keypress", function(event) {
    if (event.key === "Enter") {
        procesarPregunta();
    }
});

function procesarPregunta() {
    var inputField = document.getElementById("chat-input");
    var message = inputField.value.toLowerCase().trim();
    if (!message) return;
    inputField.value = "";

    var chatMessages = document.getElementById("chat-messages");

    // Mostrar tu foto de perfil al enviar un mensaje
    chatMessages.innerHTML += `
        <div style="display: flex; align-items: center; margin-bottom: 10px;">
            <!-- Usar la foto de perfil almacenada en localStorage -->
            <img src="${fotoPerfil}" alt="Tu Foto" style="width: 30px; height: 30px; border-radius: 50%; margin-right: 10px;">
            <div><strong>Tú:</strong> ${message}</div>
        </div>
    `;

    setTimeout(() => {
        var respuesta = respuestas[message] || "No entiendo tu pregunta. ¿Puedes ser más específico?";

        // Mostrar la imagen del chatbot (miniatura) en su respuesta
        chatMessages.innerHTML += `
            <div style="display: flex; align-items: center; margin-bottom: 10px;">
                <!-- Imagen del chatbot (puedes cambiarla si quieres) -->
                <img src="https://postimage.me/images/2025/02/06/IMG-20250123-WA0127.jpg" alt="Miniatura Chatbot" style="width: 30px; height: 30px; border-radius: 50%; margin-right: 10px;">
                <div><strong>Kitten gift ❄️:</strong> ${respuesta}</div>
            </div>
        `;
        chatMessages.scrollTop = chatMessages.scrollHeight; // Scroll automático
    }, 1000);
}

// Mostrar/Ocultar chat al hacer clic en el botón flotante
document.getElementById("chat-toggle").addEventListener("click", function() {
    var chatBox = document.getElementById("chat-container");
    chatBox.style.display = (chatBox.style.display === "none" || chatBox.style.display === "") ? "block" : "none";
});
        document.getElementById("subscribe-btn").addEventListener("click", function() {
    let selectedPlan = document.getElementById("plan-select").value;
    document.getElementById("subscription-status").textContent = `¡Gracias por suscribirte! Has elegido el plan de ${selectedPlan} MXN/mes.`;
    document.getElementById("subscription-status").style.display = "block";

    // Aquí podrías integrar una pasarela de pago real, como PayPal o Stripe.
});
        
    </script>

</body>
</html>
